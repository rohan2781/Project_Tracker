{% extends template %}
{% load static %}
{% block greeting %}
<li class="text-muted">Client {{ client.username }}</li>
{% endblock %}
{% block breadcrumb %}
<li class="breadcrumb-item">Home</li>
<li class="breadcrumb-item">Projects</li>
{% endblock breadcrumb%}
{% block content %}
<script>
    function repli(id)
    {
        var x = document.getElementById(id);
        if (x.style.display === 'none') {
        x.style.display = 'block';
        num=id;
        num=num.toString();
        num='feed'+num;
        document.getElementById(num).focus();
        } else {
        x.style.display = 'none';
        }
    }
    function subs(id)
    {
        num=id;
        num=num.toString();
        num='f'+num;
        document.getElementById(num).value=id;
    }

</script>
<style>
    .feed {
        padding: 10px; 
        width:95%;
      }
      .textarea{
        border-radius: 25px;
        border: 2px solid #73AD21;
        padding: 10px; 
        width:85%;
      }
      .textarea1{
        border-radius: 25px;
        border: 2px solid #73AD21;
        padding: 5px; 
        width:25%;
      }
</style>
<div class="col-md-12">
    <div class="card">
        <div class="card-header">
            <strong>Project : {{ project.name }}</strong>
        </div>
        <div class="callout callout-light">
            <small class="text-muted">Client</small>
            <br>
            <strong class="h4">{{ client.username }}  {{ client.last_name }}</strong>
            <div class="chart-wrapper"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
                <canvas id="sparkline-chart-3" width="86" height="25" class="chartjs-render-monitor" style="display: block; width: 86px; height: 25px;"></canvas>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-sm-8">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="callout callout-dark">
                                <small class="text-muted">Dead_Line</small>
                                <br>
                                <strong class="h4">{{ project.dead_line }}</strong>
                                <div class="chart-wrapper"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
                                    <canvas id="sparkline-chart-3" width="86" height="25" class="chartjs-render-monitor" style="display: block; width: 86px; height: 25px;"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="callout callout-danger">
                                <small class="text-muted">Amount</small>
                                <br>
                                <strong class="h4">{{ project.efforts }}</strong>
                                <div class="chart-wrapper"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
                                    <canvas id="sparkline-chart-4" width="86" height="25" class="chartjs-render-monitor" style="display: block; width: 86px; height: 25px;"></canvas>
                                </div>
                            </div>
                        </div>

                    </div>

                    <hr class="mt-0">
                    <ul class="horizontal-bars type-2">
                    <li>
                        <i class="fa fa-percent"></i>
                        <span class="title">Project Completed</span>
                        <span class="value">{{ project.complete_per|floatformat }}%</span>
                        <div class="bars">
                            <div class="progress progress-xs">
                                <div class="progress-bar bg-warning" role="progressbar" style="width: {{ project.complete_per|floatformat }}%" aria-valuenow="43" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                    </li>  
                    </ul>
                    <br><br>
                    <hr class="mt-0">
                        <span class="title">Developer's</span><br><br>
                        <ul>
                        {% for i in dev %}
                        <li><label class='container'><b>{{i}}</b></label></li>
                        {% endfor %}
                        </ul>
                </div>
            </div>
            <br>
        </div>
        <div class="callout callout-light">
            <strong class="h4">Description : </strong>{{project.description}}
            <div class="chart-wrapper"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
                <canvas id="sparkline-chart-3" width="86" height="25" class="chartjs-render-monitor" style="display: block; width: 86px; height: 25px;"></canvas>
        </div>
    </div>
    <div style='padding:30px'></div>
    <div class="callout callout-light">
        <strong class="h3">Comments : </strong>
        <div class="">
            {% for message in messages %}
            <p class="text-center alert alert-info">{{ message }}</p>
            {% endfor %}
        </div>
        <div class="chart-wrapper"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
            <canvas id="sparkline-chart-3" width="86" height="25" class="chartjs-render-monitor" style="display: block; width: 86px; height: 25px;"></canvas>
    </div><br><br>
    <div>
        <p name='cid' value='1'></p>
        {% for i in feeds %}
        <div>
        <div class="callout callout-light">
            <strong class="h5"><i class="fa fa-user"></i> {{i.name}} </strong>
            <div class="chart-wrapper"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
                <canvas id="sparkline-chart-3" width="86" height="25" class="chartjs-render-monitor" style="display: block; width: 86px; height: 25px;"></canvas>
        </div>
        <div class="callout callout-light">
            {{i.feed}}<br>
            <a href='#' onclick="return repli({{i.id}})"><strong class="h6"><i class="fa fa-reply">&nbsp</i></strong></a>&nbsp&nbsp
            {% if user.get_username|add:" "|add:request.user.last_name == i.name %}
            <a href="{% url 'delete_comm' i.id %}"><strong class="h6"><i class="fa fa-trash"> </i></strong></a>
            {% elif user.get_username == "admin" %}
            <a href="{% url 'delete_comm' i.id %}"><strong class="h6"><i class="fa fa-trash"> </i></strong></a>
            {% endif %}
            <form method="POST" action="" id="{{i.id}}" name="{{i.id}}" style='display:none'>{% csrf_token %}<div class='feed'><input type='text' id="f{{i.id}}" name="f{{i.id}}" style='display:none'></input><input type='textarea' autocomplete="off" name ="feed{{i.id}}" id="feed{{i.id}}" class='textarea1'  placeholder='Reply... ' required><!--<i class="fa fa-paper-plane ml-2" style='cursor: pointer;font-size:20px'></i>--><input type='submit' id ="sub" name="sub" onclick="return subs({{i.id}})" value="Reply"></div></form>
        </div>

        <div style='padding-left:30px'>
        {% for j in repli %}
        {% if j.c_id == i.id %}
        <div>
        <div class="callout callout-light">
            <strong class="h5"><i class="fa fa-user"></i> {{j.name}} </strong>
        </div>
        <div class="callout callout-light">
            {{j.feed}}<br>
            <!--<a href='#' onclick="return repli({{i.id}})"><strong class="h6"><i class="fa fa-reply">&nbsp</i></strong></a>&nbsp&nbsp
            <a href='#'><strong class="h6"><i class="fa fa-trash"> </i></strong></a>
            <form method="POST" action="" id="{{i.id}}" name="{{i.id}}" style='display:none'>{% csrf_token %}<div class='feed'><input type='text' id="f{{i.id}}" name="f{{i.id}}" style='display:none'></input><input type='textarea' autocomplete="off" name ="feed{{i.id}}" id="feed{{i.id}}" class='textarea1'  placeholder='Reply... ' required><i class="fa fa-paper-plane ml-2" style='cursor: pointer;font-size:20px'></i><input type='submit' id ="sub" name="sub" onclick="return subs({{i.id}})" value="Reply"></div></form>-->
        </div>
        </div>
        {% endif %}
        {% endfor %}
        </div>

        </div>
        {% endfor %}
    </div>
    <form method="POST" action="">{% csrf_token %}<div class='feed'><input type='textarea' autocomplete="off" name ='feed' id='feed' class='textarea'  placeholder='Add Comments Here....' required><!--<i class="fa fa-paper-plane ml-2" style='cursor: pointer;font-size:20px'></i>--><input type='submit' id ='sub' name='sub' value='Submit'></div></form>
    <!--<i class="fa fa-paper-plane ml-2" style='cursor: pointer;font-size:20px'></i>
    <input style="font-family: FontAwesome" value="&#xf002;" type="submit">-->
</div>
{% endblock %}
